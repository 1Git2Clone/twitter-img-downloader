import browser from "webextension-polyfill";
import { showHideContextMenu } from "./utils/show-hide";
import { handleSaveAsTargetFormat } from "./utils/handle-save";
import { initialize } from "./utils/initialize";

///////////////////////////////////////////////////////////////////////////////////////////////////
// Initialize.
///////////////////////////////////////////////////////////////////////////////////////////////////
browser.runtime.onInstalled.addListener(initialize);
browser.runtime.onStartup.addListener(initialize);

///////////////////////////////////////////////////////////////////////////////////////////////////
// Show/hide functionality when going on a tab.
///////////////////////////////////////////////////////////////////////////////////////////////////
browser.tabs.onActivated.addListener(showHideContextMenu);

///////////////////////////////////////////////////////////////////////////////////////////////////
// Handle event from context menu.
///////////////////////////////////////////////////////////////////////////////////////////////////
browser.contextMenus.onClicked.addListener(handleSaveAsTargetFormat);
